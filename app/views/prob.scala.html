@(task: String, defForm: Form[ProbForm])(implicit messages: Messages, req: RequestHeader)

@import helper._

@helper.javascriptRouter("jsRoutes")(
    routes.javascript.Application.postProbAjax
)

@main("DevGym - Task ") {
    <div><a href="@routes.Application.index()">Home</a></div><br/>

    <div class="task">@task</div>
    <div>
        <div class="prob">
        @form(routes.Application.postProb()) {
            @textarea(defForm(Application.solutionKey), 'rows -> "25", 'cols -> "80")

            <div class="submit">
                <input type="button" value="Submit" id="submit"/>
            </div>
        }
        </div>
        <br/><br/>
        <div id="report"></div>
    </div>


    <script src="@routes.Assets.versioned("javascripts/lib/jquery.min_2.2.0.js")"></script>
    <script type="text/javascript">
            $('.submit').click(function(e) {
                var report = $("#report");
                report.empty();
                var solution = $("#solution").val();

                jsRoutes.controllers.Application.postProbAjax(solution).ajax({
                    success: function(data){
                        report.html(data);
                    }, error: function(data) {
                        console.error(data);
                    }
                });
                return false;
            });
    </script>
}
